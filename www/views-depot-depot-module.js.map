{"version":3,"sources":["./src/app/views/depot/depot-routing.module.ts","./src/app/service/transactionService/transaction.service.ts","./src/app/views/depot/depot.module.ts"],"names":[],"mappings":"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","file":"views-depot-depot-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DepotPage } from './depot.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DepotPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DepotPageRoutingModule {}\n","import {Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\nimport {environment} from '../../../environments/environment';\nimport {AlertController, LoadingController, ToastController} from '@ionic/angular';\n\nconst TRANSACTION_URL = environment.apiUrl + '/user/transactions';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TransactionService {\n  transactions = [];\n  page = 1;\n\n  constructor(private httpClient: HttpClient,\n              private alertctrl: AlertController,\n              private loadingCtrl: LoadingController,\n              private toastCtrl: ToastController) {\n  }\n\n  get TransactionUrl() {\n    return TRANSACTION_URL;\n  }\n\n  /**\n   * Fonction qui permet de faire un dépôt\n   * @param depotData object\n   */\n  depot(depotData: object) {\n    this.loadingCtrl.create({\n      keyboardClose: false,\n      message: 'Envoi en cours...'\n    }).then(loadingEl => {\n      loadingEl.present().then(() => {\n        this.httpClient.post(TRANSACTION_URL, depotData).subscribe(response => {\n          loadingEl.dismiss().then(() => {\n            console.log(response);\n            this.showConfirmModal(response);\n          });\n        }, error => {\n          loadingEl.dismiss().then(() => {\n            console.log(error);\n            this.showAlert('Echec de l\\'envoi', error.error);\n          });\n        });\n      });\n    });\n  }\n\n  retrait(retraitData: object) {\n    this.loadingCtrl.create({\n      keyboardClose: false,\n      message: 'Veuillez patienter...'\n    }).then(loadingEl => {\n      loadingEl.present().then(() => {\n        this.httpClient.put(TRANSACTION_URL + '/retrait/' + retraitData['id'], retraitData).subscribe(response => {\n          loadingEl.dismiss().then(() => {\n            // console.log(response);\n            this.showAlert('Tout est OK', 'Vous pouvez faire le nécessaire');\n          });\n        }, error => {\n          loadingEl.dismiss().then(() => {\n            console.log(error);\n          });\n        });\n      });\n    });\n  }\n\n  showConfirmModal(response) {\n    this.alertctrl.create({\n      header: 'Transfert Réussi',\n      cssClass: 'default-alert',\n      message:\n        '<ion-grid class=\"grid-alert\">' +\n        '<ion-row>' +\n        '<ion-col class=\"label-alert-title\">infos</ion-col>' +\n        '</ion-row>' +\n        '<ion-row>' +\n        '<ion-col class=\"label-alert-value\">Vous avez envoyé ' + Number(response.montant).toLocaleString('fi-FI') + ' à \\n' +\n        response.clientRetrait.nom.toUpperCase() + ' ' + response.clientRetrait.prenom + ' le ' + response.dateDepot + '</ion-col>' +\n        '</ion-row>' +\n        '<ion-row>' +\n        '<ion-col class=\"label-alert-title\">code de transaction</ion-col>' +\n        '</ion-row>' +\n        '<ion-row>' +\n        '<ion-col class=\"label-alert-value\">' + response.codeTransfert + '</ion-col>' +\n        '</ion-row>' +\n        '</ion-grid>',\n      buttons: [\n        {\n          text: 'D\\'accord',\n          role: 'cancel',\n          cssClass: 'alert-button-confirm'\n        }\n      ]\n    }).then(alertEl => {\n      alertEl.present();\n    });\n  }\n\n  private showAlert(header, message: string) {\n    this.alertctrl\n      .create({\n        header,\n        message,\n        buttons: ['D\\'accord']\n      })\n      .then(alertEl => {\n        alertEl.present();\n      });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DepotPageRoutingModule } from './depot-routing.module';\n\nimport { DepotPage } from './depot.page';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        IonicModule,\n        DepotPageRoutingModule,\n        ReactiveFormsModule\n    ],\n  declarations: [DepotPage]\n})\nexport class DepotPageModule {}\n"],"sourceRoot":"webpack:///"}